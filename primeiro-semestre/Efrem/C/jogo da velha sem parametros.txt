#include<stdio.h>

int main()
{
    char tabuleiro[3][3], jogador;
    int x, i, j, linha, coluna, valida, venceu, jogadas;
    
    for (i=0;i<3;i++){
        for (j=0;j<3;j++){
            tabuleiro[i][j] = ' ';
        }
    }
    
    x = 0;
    jogador = 'X';
    valida = 0;
    jogadas = 0;
    venceu = 0;
    
    printf("\n");
    for (i=0;i<3;i++){ // inicializar o tabuleiro
        for (j=0;j<3;j++){
            printf("%c", tabuleiro[i][j]);
            if (j<2){
                printf(" | ");
            }
        }
        if (i<2){
            printf("\n");
            printf("----------");
            printf("\n");
        }
    }
    
    while(jogadas < 9){
        while(!valida){ // pedir e verificar a jogada
            printf("\nJogador %c, faça sua jogada: \n", jogador);
            printf("Linha: ");
            scanf("%d", &linha);
            printf("Coluna: ");
            scanf("%d", &coluna);
            printf("\n");
            if (linha < 1 || linha > 3 || coluna < 1 || coluna > 3 || tabuleiro[linha - 1][coluna - 1] != ' '){
                printf("Jogada invalida!\n");
                for (i=0;i<3;i++){ // inicializar o tabuleiro
                    for (j=0;j<3;j++){
                        printf("%c", tabuleiro[i][j]);
                        if (j<2){
                        printf(" | ");
                        }
                    }
                     if (i<2){
                        printf("\n");
                        printf("----------");
                        printf("\n");
                    }
                }
            } else {
                valida = 1;
                tabuleiro[linha - 1][coluna - 1] = jogador;
                jogadas++;
            }
        }
        valida = 0;
        
        printf("\n");
        
        for (i=0;i<3;i++){
            for (j=0;j<3;j++){
                printf("%c", tabuleiro[i][j]);
                if (j<2){
                    printf(" | ");
                }
            }
            if (i<2){
                printf("\n");
                printf("----------");
                printf("\n");
            }
        }
        
        
        if (jogadas >= 5){ // minimo numero de jogadas
            for (i=0;i<3;i++){ // verificar ganhador 1.1
                if ((tabuleiro[i][0] != ' ') && (tabuleiro[i][0] == tabuleiro[i][1]) && (tabuleiro[i][0] == tabuleiro[i][2])){ // linha
                    venceu = 1; // tabuleiro[i][0] != ' ' -> nao conta espaços vazios
                } else if ((tabuleiro[0][i] != ' ') && (tabuleiro[0][i] == tabuleiro[1][i]) && (tabuleiro[0][i] == tabuleiro[2][i])){ // coluna
                    venceu = 1;
                }
            }
            if ((tabuleiro[0][0] != ' ') && (tabuleiro[0][0] == tabuleiro[1][1]) && (tabuleiro[0][0] == tabuleiro[2][2])){ // diagonal principal
                    venceu = 1;
                } else if ((tabuleiro[0][2] != ' ') && (tabuleiro[0][2] == tabuleiro[1][1]) && (tabuleiro[0][2] == tabuleiro[2][0])){ // diagonal sec.
                    venceu = 1;
                }
        }
        
        if (venceu){  // verificar ganhador 1.2
            printf("\nO jogo acabou!\nO ganhador foi o %c", jogador);
            break;
        } else if (jogadas == 9){
            printf("\nO jogo acabou!\nVelha!");
            break;
        }
        
        
        if (x == 0){      // trocar jogador
            jogador = 'O';
            x++;
        } else {
           jogador = 'X';
            x--; 
        }
        
    }
    return 0;
}

